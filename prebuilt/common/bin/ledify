#!/sbin/sh
#
# Copyright (c) 2015, Mattia "AntaresOne" D'Alleva
# Copyright (c) 2015, JDCTeam
#
# Custom notification LED at boot
#
# Stop service not handled by the init, because loop may be incomplete and some LEDs may still be powered ON.

# Brightness
BRG=echo #value
# Blue LED
LED_B=/sys/class/leds/led_b/brightness
# Green LED
LED_G=/sys/class/leds/led_g/brightness
# Red LED
LED_R=/sys/class/leds/led_r/brightness
# Value for color transition speed
SPD="sleep 0.10"

while :; do
    # To check if boot is complete
    BOOT=$(getprop sys.boot_completed | grep "1")
    if [ "$BOOT" == "1" ]; then
        # Reset
        $BRG 0 > $LED_B
        $BRG 0 > $LED_G
        $BRG 0 > $LED_R
        # Stop service
        exit 0
    else
        # Red
        $BRG 150 > $LED_R
        $SPD
        # Orange
        $BRG 40 > $LED_G
        $SPD
        # Yellow
        $BRG 150 > $LED_G
        $SPD
        # Green
        $BRG 0 > $LED_R
        $SPD
        # Blue
        $BRG 0 > $LED_G
        $BRG 150 > $LED_B
        $SPD
        # Indigo
        $BRG 10 > $LED_R
        $SPD
        # Violet
        $BRG 150 > $LED_R
        $SPD
        ### Reverse ###
        # Indigo
        $BRG 10 > $LED_R
        $SPD
        # Blue
        $BRG 0 > $LED_G
        $BRG 0 > $LED_R
        $SPD
        # Green
        $BRG 0 > $LED_B
        $BRG 150 > $LED_G
        $SPD
        # Yellow
        $BRG 150 > $LED_R
        $SPD
        # Orange
        $BRG 40 > $LED_G
        $SPD
        # Red
        $BRG 0 > $LED_G
    fi
done
